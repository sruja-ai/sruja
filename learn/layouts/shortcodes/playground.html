<div id="playground-container">
    <div class="flex items-center gap-4 mb-4 flex-wrap">
        <label for="example-select" class="font-semibold">Examples</label>
        <select id="example-select" class="px-2 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-inherit"></select>
        <span id="status" class="text-slate-500 dark:text-slate-400 text-sm">Loading WASM...</span>
        <button id="run-btn" class="book-btn" aria-label="Run">▶</button>
        <div id="error-output" class="text-red-600 dark:text-red-400 whitespace-pre-wrap hidden ml-3"></div>
    </div>
    <div class="flex flex-col md:flex-row gap-4 border border-slate-300 dark:border-slate-600 rounded-lg p-4 bg-white dark:bg-slate-800">
        <div class="flex flex-col flex-1 md:h-[500px]">
            <textarea id="sruja-input" spellcheck="false" class="w-full flex-1 font-mono p-2 border border-slate-300 dark:border-slate-600 rounded bg-slate-900 dark:bg-slate-950 text-inherit">{{ .Inner }}</textarea>
        </div>
        <div class="flex flex-col flex-1 md:h-[500px]">
            <div id="d2-output" class="w-full flex-1 min-h-0 overflow-auto border border-slate-300 dark:border-slate-600 relative bg-white dark:bg-slate-800">
                <div class="preview-toolbar absolute top-2 right-2 flex gap-2 bg-slate-900/60 dark:bg-slate-900/60 border border-slate-700 dark:border-slate-600 rounded-lg p-1.5 backdrop-blur-sm hidden">
                    <button id="zoom-in" title="Zoom In" class="bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 rounded-md px-2 py-1 text-sm leading-none cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700">＋</button>
                    <button id="zoom-out" title="Zoom Out" class="bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 rounded-md px-2 py-1 text-sm leading-none cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700">－</button>
                    <button id="zoom-reset" title="Reset" class="bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 rounded-md px-2 py-1 text-sm leading-none cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700">↺</button>
                    <button id="expand-preview" title="Expand" class="bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 rounded-md px-2 py-1 text-sm leading-none cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700">⛶</button>
                </div>
            </div>
        </div>
    </div>
</div>

{{ $opts := dict
  "minify" (not hugo.IsDevelopment)
  "sourceMap" (cond hugo.IsDevelopment "external" "")
  "jsx" "automatic"
}}
{{ $playground := resources.Get "js/playground.ts" | js.Build $opts }}
<script src="{{ $playground.RelPermalink }}" defer></script>
<script src="/wasm_exec.js"></script>

<style>
    /* Modal styles - will be migrated to shadcn/ui Dialog component */
    .sruja-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
    }
    .sruja-modal-content {
        position: relative;
        background: #ffffff;
        border-radius: 8px;
        padding: 2rem;
        max-width: 90vw;
        max-height: 90vh;
        overflow: auto;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    .sruja-modal-close {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        width: 2rem;
        height: 2rem;
        font-size: 1.5rem;
        line-height: 1;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .sruja-modal-close:hover {
        background: #e2e8f0;
    }
    .modal-svg {
        max-width: 100%;
        height: auto;
    }
    .zoom-container { display: inline-block; }
    .zoom-container img { display: block; max-width: none; }
    @media (prefers-color-scheme: dark) {
        .sruja-modal-content {
            background: #1e293b;
            color: #f1f5f9;
        }
        .sruja-modal-close {
            background: #334155;
            border-color: #475569;
            color: #f1f5f9;
        }
        .sruja-modal-close:hover {
            background: #475569;
        }
    }
</style>
