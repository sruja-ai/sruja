{
  "title": "Integrate External Payment Service",
  "slug": "external-service",
  "summary": "Add a PaymentGateway external and connect API to it.",
  "difficulty": "intermediate",
  "topic": "integration",
  "estimatedTime": "10-15 min",
  "initialDsl": "architecture \"E-Commerce\" {\n  person Customer \"Online Shopper\"\n  system WebShop {\n    container WebApp \"Frontend\"\n    container API \"Backend API\"\n    datastore DB \"PostgreSQL\"\n    queue OrderQueue \"Redis\"\n  }\n  Customer -> WebApp \"Uses\"\n  WebApp -> API \"Calls\"\n  API -> DB \"Reads/Writes\"\n  // TODO: Add external PaymentGateway and connect API -> PaymentGateway \"Charges\"\n}",
  "checks": [
    { "type": "noErrors" },
    { "type": "elementExists", "name": "PaymentGateway", "message": "Add external PaymentGateway" },
    { "type": "relationExists", "source": "API", "target": "PaymentGateway", "message": "Connect API -> PaymentGateway" }
  ],
  "hints": [
    "Use external PaymentGateway \"Stripe/PayPal\"",
    "Add relation API -> PaymentGateway \"Charges\""
  ],
  "solution": "architecture \"E-Commerce\" {\n  person Customer \"Online Shopper\"\n  system WebShop {\n    container WebApp \"Frontend\"\n    container API \"Backend API\"\n    datastore DB \"PostgreSQL\"\n    queue OrderQueue \"Redis\"\n  }\n  external PaymentGateway \"Stripe\"\n  Customer -> WebApp \"Uses\"\n  WebApp -> API \"Calls\"\n  API -> DB \"Reads/Writes\"\n  API -> PaymentGateway \"Charges\"\n}"
}
