/* LikeC4Canvas.animation.css */

/* Define Animation Variables */
:root {
  --color-flow-active: #3b82f6;
  /* Neon Blue */
  --color-flow-visited: #94a3b8;
  /* Muted Slate */
  --shadow-flow-active: 0 0 20px rgba(59, 130, 246, 0.6), 0 0 10px rgba(59, 130, 246, 0.4);
  --shadow-node-hover: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
  --transition-smooth: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* -------------------------------------------------------------------------- */
/* Node Animations                                                            */
/* -------------------------------------------------------------------------- */

/* Default Node Transition */
.likec4-node {
  transition: var(--transition-smooth);
}

/* Node Hover Effect (Micro-interaction) */
/* Note: We target the specific group or div that represents the node visual */
.likec4-node:hover {
  transform: translateY(-2px) scale(1.005);
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
  cursor: pointer;
  z-index: 10;
  /* Bring to front */
}

/* Animation: Active Node (Pulse & Glow) */
.likec4-node.animation-node-active {
  stroke: var(--color-flow-active) !important;
  stroke-width: 3px !important;
  fill-opacity: 1 !important;
  filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.5));
  animation: pulse-glow 2s infinite cubic-bezier(0.4, 0, 0.6, 1);
}

/* Animation: Visited Node */
.likec4-node.animation-node-visited {
  stroke: var(--color-flow-visited) !important;
  stroke-width: 2px !important;
  opacity: 0.9;
  filter: grayscale(0.2);
}

/* Animation: Dimmed (Non-active) Node */
.likec4-node.animation-node-dimmed {
  opacity: 0.3;
  filter: grayscale(0.8) blur(0.5px);
  transition: opacity 0.5s ease;
}

/* Keyframes for Node Pulse */
@keyframes pulse-glow {

  0%,
  100% {
    filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.5));
    transform: scale(1);
  }

  50% {
    filter: drop-shadow(0 0 25px rgba(59, 130, 246, 0.8));
    transform: scale(1.01);
  }
}

/* -------------------------------------------------------------------------- */
/* Edge Animations                                                            */
/* -------------------------------------------------------------------------- */

/* Default Edge Transition */
.likec4-edge {
  transition: stroke 0.3s ease, stroke-width 0.3s ease, opacity 0.3s ease;
}

/* Animation: Active Edge (Flowing Dash) */
.likec4-edge.animation-edge-active {
  stroke: var(--color-flow-active) !important;
  stroke-width: 3px !important;
  stroke-dasharray: 10, 5;
  stroke-linecap: round;
  animation: flow-dash-forward 1s linear infinite;
  filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.6));
  z-index: 5;
}

/* Animation: Visited Edge */
.likec4-edge.animation-edge-visited {
  stroke: var(--color-flow-visited) !important;
  stroke-width: 2px !important;
  stroke-dasharray: 4, 4;
  opacity: 0.8;
}

/* Animation: Dimmed Edge */
.likec4-edge.animation-edge-dimmed {
  opacity: 0.1;
  stroke-width: 1px !important;
  stroke-dasharray: 2, 8;
}

/* Keyframes for Edge Flow */
@keyframes flow-dash-forward {
  to {
    stroke-dashoffset: -15;
  }
}

/* -------------------------------------------------------------------------- */
/* Accessibility: Reduced Motion                                              */
/* -------------------------------------------------------------------------- */

@media (prefers-reduced-motion: reduce) {

  .likec4-node,
  .likec4-edge,
  .likec4-node:hover {
    transition: none !important;
    animation: none !important;
    transform: none !important;
  }

  .likec4-node.animation-node-active {
    stroke-width: 4px !important;
    /* Thicker border instead of glow */
    filter: none !important;
  }

  .likec4-edge.animation-edge-active {
    stroke-dasharray: none !important;
    /* Solid line instead of moving dash */
    stroke-width: 4px !important;
  }
}

/* -------------------------------------------------------------------------- */
/* Dark Mode Adjustments (if applicable)                                      */
/* -------------------------------------------------------------------------- */
/* Assuming .dark class on body or container */
.dark .likec4-node.animation-node-active {
  --color-flow-active: #60a5fa;
  /* Lighter blue for dark mode */
}