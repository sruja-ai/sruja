import{a as u,R as y,j as d}from"./iframe-CLHqt8sP.js";import{c as qe}from"./cn-VBtxfiI-.js";import{$ as Ve,a as We}from"./useFocusRing-4vPDgUpM.js";import{w as He,e as Ye}from"./use-resolve-button-type-DhPqIc8n.js";import{F as Qe,y as Ze,R as ze,T as Ue,w as Je,A as Xe}from"./floating-2JlZ9ldt.js";import{u as z,Y as ee,y as U,o as B,V as he,K as le,n as et,T as tt,s as ke,A as ve}from"./use-sync-refs-v6ctzwoA.js";import{E as ot}from"./use-event-listener-CbHIemfg.js";import{T as rt,x as nt,c as at,S as J,u as Te,p as st,f as lt,t as ut,d as ct,e as it,b as dt}from"./portal-CRTDVjVw.js";import{u as Fe,x as pt,S as vt,j as je,a as M}from"./use-tab-direction-H-bZp2mB.js";import{a as xe,l as mt,n as ue,e as se,o as K,i as ft,r as Se}from"./keyboard-DOqIamXD.js";import{u as Ee,N as Ne,i as X,x as _e,s as bt,c as gt}from"./open-closed-B--VY9yg.js";import{C as Re}from"./close-provider-CmZQmh2t.js";import{f as Pe,s as ye}from"./hidden-CeoxBUgT.js";import{s as De}from"./bugs-ByA1MTr8.js";import{x as Be,v as q,T as A,H as ht,I as xt,A as $e}from"./focus-management-DE1YMz3g.js";import{K as Pt}from"./transition-Bjg5DtQF.js";import{B as ae}from"./Button-DrzFMabF.js";import"./preload-helper-PPVm8Dsz.js";import"./bundle-mjs-COJ8Fh6m.js";import"./index-DRowAfMf.js";import"./index-dLArjxyT.js";import"./variants-DKu3G6j2.js";var yt=Object.defineProperty,$t=(e,r,t)=>r in e?yt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Oe=(e,r,t)=>($t(e,typeof r!="symbol"?r+"":r,t),t),h=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(h||{}),St=(e=>(e[e.OpenPopover=0]="OpenPopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(St||{});let Bt={0:e=>e.popoverState===0?e:{...e,popoverState:0,__demoMode:!1},1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,r){return e.button===r.button?e:{...e,button:r.button}},3(e,r){return e.buttonId===r.buttonId?e:{...e,buttonId:r.buttonId}},4(e,r){return e.panel===r.panel?e:{...e,panel:r.panel}},5(e,r){return e.panelId===r.panelId?e:{...e,panelId:r.panelId}}};class we extends rt{constructor(r){super(r),Oe(this,"actions",{close:()=>this.send({type:1}),refocusableClose:t=>{this.actions.close();let v=t?xe(t)?t:"current"in t&&xe(t.current)?t.current:this.state.button:this.state.button;v?.focus()},open:()=>this.send({type:0}),setButtonId:t=>this.send({type:3,buttonId:t}),setButton:t=>this.send({type:2,button:t}),setPanelId:t=>this.send({type:5,panelId:t}),setPanel:t=>this.send({type:4,panel:t})}),Oe(this,"selectors",{isPortalled:t=>{var v;if(!t.button||!t.panel)return!1;let b=(v=mt(t.button))!=null?v:document;for(let $ of b.querySelectorAll("body > *"))if(Number($?.contains(t.button))^Number($?.contains(t.panel)))return!0;let g=Be(b),s=g.indexOf(t.button),o=(s+g.length-1)%g.length,I=(s+1)%g.length,w=g[o],a=g[I];return!t.panel.contains(w)&&!t.panel.contains(a)}});{let t=this.state.id,v=nt.get(null);this.on(0,()=>v.actions.push(t)),this.on(1,()=>v.actions.pop(t))}}static new({id:r,__demoMode:t=!1}){return new we({id:r,__demoMode:t,popoverState:t?0:1,buttons:{current:[]},button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:{current:null},afterPanelSentinel:{current:null},afterButtonSentinel:{current:null}})}reduce(r,t){return z(t.type,Bt,r,t)}}const Me=u.createContext(null);function me(e){let r=u.useContext(Me);if(r===null){let t=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,me),t}return r}function wt({id:e,__demoMode:r=!1}){let t=u.useMemo(()=>we.new({id:e,__demoMode:r}),[]);return at(()=>t.dispose()),t}let Ie=u.createContext(null);Ie.displayName="PopoverGroupContext";function Ae(){return u.useContext(Ie)}let fe=u.createContext(null);fe.displayName="PopoverPanelContext";function It(){return u.useContext(fe)}let Ct="div";function kt(e,r){var t;let v=u.useId(),{__demoMode:b=!1,...g}=e,s=wt({id:v,__demoMode:b}),o=u.useRef(null),I=U(r,tt(l=>{o.current=l})),[w,a,$,S,O]=J(s,u.useCallback(l=>[l.popoverState,l.button,l.panel,l.buttonId,l.panelId],[])),F=ct((t=o.current)!=null?t:a),m=ke(S),f=ke(O),x=u.useMemo(()=>({buttonId:m,panelId:f,close:s.actions.close}),[m,f,s]),P=Ae(),c=P?.registerPopover,C=B(()=>{var l,k;let j=se((l=o.current)!=null?l:a);return(k=P?.isFocusWithinPopoverGroup())!=null?k:j&&(a?.contains(j)||$?.contains(j))});u.useEffect(()=>c?.(x),[c,x]);let[te,oe]=it(),G=pt(a),R=vt({mainTreeNode:G,portals:te,defaultContainers:[{get current(){return s.state.button}},{get current(){return s.state.panel}}]});ot(F,"focus",l=>{var k,j,N,Q,_,Z;l.target!==window&&ft(l.target)&&s.state.popoverState===h.Open&&(C()||s.state.button&&s.state.panel&&(R.contains(l.target)||(j=(k=s.state.beforePanelSentinel.current)==null?void 0:k.contains)!=null&&j.call(k,l.target)||(Q=(N=s.state.afterPanelSentinel.current)==null?void 0:N.contains)!=null&&Q.call(N,l.target)||(Z=(_=s.state.afterButtonSentinel.current)==null?void 0:_.contains)!=null&&Z.call(_,l.target)||s.actions.close()))},!0);let W=w===h.Open;dt(W,R.resolveContainers,(l,k)=>{s.actions.close(),ht(k,xt.Loose)||(l.preventDefault(),a?.focus())});let re=ue({open:w===h.Open,close:s.actions.refocusableClose}),ne=J(s,u.useCallback(l=>z(l.popoverState,{[h.Open]:X.Open,[h.Closed]:X.Closed}),[])),H={ref:I},Y=le();return y.createElement(je,{node:G},y.createElement(Xe,null,y.createElement(fe.Provider,{value:null},y.createElement(Me.Provider,{value:s},y.createElement(Re,{value:s.actions.refocusableClose},y.createElement(gt,{value:ne},y.createElement(oe,null,Y({ourProps:H,theirProps:g,slot:re,defaultTag:Ct,name:"Popover"}))))))))}let Tt="button";function Ot(e,r){let t=u.useId(),{id:v=`headlessui-popover-button-${t}`,disabled:b=!1,autoFocus:g=!1,...s}=e,o=me("Popover.Button"),[I,w,a,$,S,O,F]=J(o,u.useCallback(n=>[n.popoverState,o.selectors.isPortalled(n),n.button,n.buttonId,n.panel,n.panelId,n.afterButtonSentinel],[])),m=u.useRef(null),f=`headlessui-focus-sentinel-${u.useId()}`,x=Ae(),P=x?.closeOthers,c=It()!==null;u.useEffect(()=>{if(!c)return o.actions.setButtonId(v),()=>o.actions.setButtonId(null)},[c,v,o]);let[C]=u.useState(()=>Symbol()),te=U(m,r,Qe(),B(n=>{if(!c){if(n)o.state.buttons.current.push(C);else{let i=o.state.buttons.current.indexOf(C);i!==-1&&o.state.buttons.current.splice(i,1)}o.state.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),n&&o.actions.setButton(n)}})),oe=U(m,r),G=B(n=>{var i,T,E;if(c){if(o.state.popoverState===h.Closed)return;switch(n.key){case K.Space:case K.Enter:n.preventDefault(),(T=(i=n.target).click)==null||T.call(i),o.actions.close(),(E=o.state.button)==null||E.focus();break}}else switch(n.key){case K.Space:case K.Enter:n.preventDefault(),n.stopPropagation(),o.state.popoverState===h.Closed?(P?.(o.state.buttonId),o.actions.open()):o.actions.close();break;case K.Escape:if(o.state.popoverState!==h.Open)return P?.(o.state.buttonId);if(!m.current)return;let D=se(m.current);if(D&&!m.current.contains(D))return;n.preventDefault(),n.stopPropagation(),o.actions.close();break}}),R=B(n=>{c||n.key===K.Space&&n.preventDefault()}),W=B(n=>{var i,T;De(n.currentTarget)||b||(c?(o.actions.close(),(i=o.state.button)==null||i.focus()):(n.preventDefault(),n.stopPropagation(),o.state.popoverState===h.Closed?(P?.(o.state.buttonId),o.actions.open()):o.actions.close(),(T=o.state.button)==null||T.focus()))}),re=B(n=>{n.preventDefault(),n.stopPropagation()}),{isFocusVisible:ne,focusProps:H}=Ve({autoFocus:g}),{isHovered:Y,hoverProps:l}=We({isDisabled:b}),{pressed:k,pressProps:j}=He({disabled:b}),N=I===h.Open,Q=ue({open:N,active:k||N,disabled:b,hover:Y,focus:ne,autofocus:g}),_=Ye(e,a),Z=c?he({ref:oe,type:_,onKeyDown:G,onClick:W,disabled:b||void 0,autoFocus:g},H,l,j):he({ref:te,id:$,type:_,"aria-expanded":I===h.Open,"aria-controls":S?O:void 0,disabled:b||void 0,autoFocus:g,onKeyDown:G,onKeyUp:R,onClick:W,onMouseDown:re},H,l,j),ce=Fe(),be=B(()=>{if(!xe(o.state.panel))return;let n=o.state.panel;function i(){z(ce.current,{[M.Forwards]:()=>q(n,A.First),[M.Backwards]:()=>q(n,A.Last)})===$e.Error&&q(Be(Se(o.state.button)).filter(T=>T.dataset.headlessuiFocusGuard!=="true"),z(ce.current,{[M.Forwards]:A.Next,[M.Backwards]:A.Previous}),{relativeTo:o.state.button})}i()}),p=le();return y.createElement(y.Fragment,null,p({ourProps:Z,theirProps:s,slot:Q,defaultTag:Tt,name:"Popover.Button"}),N&&!c&&w&&y.createElement(Pe,{id:f,ref:F,features:ye.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:be}))}let Ft="div",jt=ve.RenderStrategy|ve.Static;function Ge(e,r){let t=u.useId(),{id:v=`headlessui-popover-backdrop-${t}`,transition:b=!1,...g}=e,s=me("Popover.Backdrop"),o=J(s,u.useCallback(x=>x.popoverState,[])),[I,w]=u.useState(null),a=U(r,w),$=Ee(),[S,O]=Ne(b,I,$!==null?($&X.Open)===X.Open:o===h.Open),F=B(x=>{if(De(x.currentTarget))return x.preventDefault();s.actions.close()}),m=ue({open:o===h.Open}),f={ref:a,id:v,"aria-hidden":!0,onClick:F,..._e(O)};return le()({ourProps:f,theirProps:g,slot:m,defaultTag:Ft,features:jt,visible:S,name:"Popover.Backdrop"})}let Et="div",Nt=ve.RenderStrategy|ve.Static;function _t(e,r){let t=u.useId(),{id:v=`headlessui-popover-panel-${t}`,focus:b=!1,anchor:g,portal:s=!1,modal:o=!1,transition:I=!1,...w}=e,a=me("Popover.Panel"),$=J(a,a.selectors.isPortalled),[S,O,F,m,f]=J(a,u.useCallback(p=>[p.popoverState,p.button,p.__demoMode,p.beforePanelSentinel,p.afterPanelSentinel],[])),x=`headlessui-focus-sentinel-before-${t}`,P=`headlessui-focus-sentinel-after-${t}`,c=u.useRef(null),C=Ze(g),[te,oe]=ze(C),G=Ue();C&&(s=!0);let[R,W]=u.useState(null),re=U(c,r,C?te:null,a.actions.setPanel,W),ne=Te(O),H=Te(c.current);et(()=>(a.actions.setPanelId(v),()=>a.actions.setPanelId(null)),[v,a]);let Y=Ee(),[l,k]=Ne(I,R,Y!==null?(Y&X.Open)===X.Open:S===h.Open);st(l,O,a.actions.close),lt(F?!1:o&&l,H);let j=B(p=>{var n;switch(p.key){case K.Escape:if(a.state.popoverState!==h.Open||!c.current)return;let i=se(c.current);if(i&&!c.current.contains(i))return;p.preventDefault(),p.stopPropagation(),a.actions.close(),(n=a.state.button)==null||n.focus();break}});u.useEffect(()=>{var p;e.static||S===h.Closed&&((p=e.unmount)==null||p)&&a.actions.setPanel(null)},[S,e.unmount,e.static,a]),u.useEffect(()=>{if(F||!b||S!==h.Open||!c.current)return;let p=se(c.current);c.current.contains(p)||q(c.current,A.First)},[F,b,c.current,S]);let N=ue({open:S===h.Open,close:a.actions.refocusableClose}),Q=he(C?G():{},{ref:re,id:v,onKeyDown:j,onBlur:b&&S===h.Open?p=>{var n,i,T,E,D;let L=p.relatedTarget;L&&c.current&&((n=c.current)!=null&&n.contains(L)||(a.actions.close(),((T=(i=m.current)==null?void 0:i.contains)!=null&&T.call(i,L)||(D=(E=f.current)==null?void 0:E.contains)!=null&&D.call(E,L))&&L.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...w.style,...oe,"--button-width":Je(l,O,!0).width},..._e(k)}),_=Fe(),Z=B(()=>{let p=c.current;if(!p)return;function n(){z(_.current,{[M.Forwards]:()=>{var i;q(p,A.First)===$e.Error&&((i=a.state.afterPanelSentinel.current)==null||i.focus())},[M.Backwards]:()=>{var i;(i=a.state.button)==null||i.focus({preventScroll:!0})}})}n()}),ce=B(()=>{let p=c.current;if(!p)return;function n(){z(_.current,{[M.Forwards]:()=>{var i;if(!a.state.button)return;let T=(i=Se(a.state.button))!=null?i:document.body,E=Be(T),D=E.indexOf(a.state.button),L=E.slice(0,D+1),ie=[...E.slice(D+1),...L];for(let ge of ie.slice())if(ge.dataset.headlessuiFocusGuard==="true"||R!=null&&R.contains(ge)){let Ce=ie.indexOf(ge);Ce!==-1&&ie.splice(Ce,1)}q(ie,A.First,{sorted:!1})},[M.Backwards]:()=>{var i;q(p,A.Previous)===$e.Error&&((i=a.state.button)==null||i.focus())}})}n()}),be=le();return y.createElement(bt,null,y.createElement(fe.Provider,{value:v},y.createElement(Re,{value:a.actions.refocusableClose},y.createElement(ut,{enabled:s?e.static||l:!1,ownerDocument:ne},l&&$&&y.createElement(Pe,{id:x,ref:m,features:ye.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Z}),be({ourProps:Q,theirProps:w,slot:N,defaultTag:Et,features:Nt,visible:l,name:"Popover.Panel"}),l&&$&&y.createElement(Pe,{id:P,ref:f,features:ye.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:ce})))))}let Rt="div";function Dt(e,r){let t=u.useRef(null),v=U(t,r),[b,g]=u.useState([]),s=B(m=>{g(f=>{let x=f.indexOf(m);if(x!==-1){let P=f.slice();return P.splice(x,1),P}return f})}),o=B(m=>(g(f=>[...f,m]),()=>s(m))),I=B(()=>{var m;let f=Se(t.current);if(!f)return!1;let x=se(t.current);return(m=t.current)!=null&&m.contains(x)?!0:b.some(P=>{var c,C;return((c=f.getElementById(P.buttonId.current))==null?void 0:c.contains(x))||((C=f.getElementById(P.panelId.current))==null?void 0:C.contains(x))})}),w=B(m=>{for(let f of b)f.buttonId.current!==m&&f.close()}),a=u.useMemo(()=>({registerPopover:o,unregisterPopover:s,isFocusWithinPopoverGroup:I,closeOthers:w}),[o,s,I,w]),$=ue({}),S=e,O={ref:v},F=le();return y.createElement(je,null,y.createElement(Ie.Provider,{value:a},F({ourProps:O,theirProps:S,slot:$,defaultTag:Rt,name:"Popover.Group"})))}let Mt=ee(kt),Le=ee(Ot),At=ee(Ge),Gt=ee(Ge),Ke=ee(_t),Lt=ee(Dt),Kt=Object.assign(Mt,{Button:Le,Backdrop:Gt,Overlay:At,Panel:Ke,Group:Lt});const qt={bottom:"top-full mt-2",top:"bottom-full mb-2",right:"left-full ml-2",left:"right-full mr-2"};function V({trigger:e,children:r,placement:t="bottom",open:v,onOpenChange:b}){return d.jsx(Kt,{className:"relative",children:({open:g})=>d.jsxs(d.Fragment,{children:[d.jsx(Le,{className:"focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--color-primary)] rounded-md",children:e}),d.jsx(Pt,{as:u.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:d.jsx(Ke,{className:qe("absolute z-50",qt[t],"min-w-[200px] max-w-[400px]","bg-[var(--color-background)] border border-[var(--color-border)] rounded-md shadow-lg","p-4"),children:r})})]})})}V.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{trigger:{required:!0,tsType:{name:"ReactNode"},description:"Button/content that triggers the popover"},children:{required:!0,tsType:{name:"ReactNode"},description:"Popover content"},placement:{required:!1,tsType:{name:"union",raw:"'left' | 'right' | 'top' | 'bottom'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"Popover placement",defaultValue:{value:"'bottom'",computed:!1}},open:{required:!1,tsType:{name:"boolean"},description:"Whether popover is open (controlled)"},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:"Callback when popover state changes"}}};const vo={title:"Components/Popover",component:V,tags:["autodocs"],parameters:{layout:"centered"},argTypes:{trigger:{control:!1},placement:{control:{type:"select"},options:["top","bottom","left","right"]},children:{control:!1}}},de={args:{trigger:d.jsx(ae,{children:"Toggle Popover"}),placement:"bottom",children:d.jsx("div",{children:"Popover content"})},render:e=>d.jsx("div",{className:"bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5",children:d.jsx(V,{...e})})},pe={render:()=>d.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-xl",children:[d.jsx("div",{className:"bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5",children:d.jsx(V,{trigger:d.jsx(ae,{children:"Bottom"}),placement:"bottom",children:d.jsx("div",{className:"text-sm text-[var(--color-text-secondary)]",children:"Bottom content"})})}),d.jsx("div",{className:"bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5",children:d.jsx(V,{trigger:d.jsx(ae,{children:"Top"}),placement:"top",children:d.jsx("div",{className:"text-sm text-[var(--color-text-secondary)]",children:"Top content"})})}),d.jsx("div",{className:"bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5",children:d.jsx(V,{trigger:d.jsx(ae,{children:"Left"}),placement:"left",children:d.jsx("div",{className:"text-sm text-[var(--color-text-secondary)]",children:"Left content"})})}),d.jsx("div",{className:"bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5",children:d.jsx(V,{trigger:d.jsx(ae,{children:"Right"}),placement:"right",children:d.jsx("div",{className:"text-sm text-[var(--color-text-secondary)]",children:"Right content"})})})]})};de.parameters={...de.parameters,docs:{...de.parameters?.docs,source:{originalSource:`{
  args: {
    trigger: <Button>Toggle Popover</Button>,
    placement: 'bottom' as const,
    children: <div>Popover content</div>
  },
  render: (args: any) => <div className="bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5">
      <Popover {...args} />
    </div>
}`,...de.parameters?.docs?.source}}};pe.parameters={...pe.parameters,docs:{...pe.parameters?.docs,source:{originalSource:`{
  render: () => <div className="grid grid-cols-2 gap-6 max-w-xl">
      <div className="bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5">
        <Popover trigger={<Button>Bottom</Button>} placement="bottom">
          <div className="text-sm text-[var(--color-text-secondary)]">Bottom content</div>
        </Popover>
      </div>
      <div className="bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5">
        <Popover trigger={<Button>Top</Button>} placement="top">
          <div className="text-sm text-[var(--color-text-secondary)]">Top content</div>
        </Popover>
      </div>
      <div className="bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5">
        <Popover trigger={<Button>Left</Button>} placement="left">
          <div className="text-sm text-[var(--color-text-secondary)]">Left content</div>
        </Popover>
      </div>
      <div className="bg-[var(--color-background)] border border-[var(--color-border)] rounded-lg shadow-sm p-5">
        <Popover trigger={<Button>Right</Button>} placement="right">
          <div className="text-sm text-[var(--color-text-secondary)]">Right content</div>
        </Popover>
      </div>
    </div>
}`,...pe.parameters?.docs?.source}}};const mo=["Basic","Showcase"];export{de as Basic,pe as Showcase,mo as __namedExportsOrder,vo as default};
