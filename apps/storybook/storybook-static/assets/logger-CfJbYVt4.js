let b=null;function h(){return typeof window<"u"&&window.posthog?window.posthog:b}function v(e,r){const n=h();n&&typeof n.capture=="function"&&n.capture(e,r||{})}var _={};let s=!1,g;const u=typeof process<"u"&&_&&!0;function S(){if(s)return!0;if(typeof window<"u"){const e=window.__SRUJA_DEBUG__;if(typeof e=="boolean")return e;try{if(window.localStorage?.getItem("sruja:debug")==="true")return!0}catch{}}return!u}function l(e){return[e.timestamp,`[${e.level.toUpperCase()}]`,e.service?`[${e.service}]`:"",e.message].filter(Boolean).join(" ")}function d(e){const r={timestamp:e.timestamp,level:e.level,message:e.message};return e.service&&(r.service=e.service),e.context&&Object.keys(e.context).length>0&&(r.context=e.context),JSON.stringify(r)}function i(e,r,n){const w=new Date().toISOString(),t={level:e,message:r,context:n,timestamp:w,service:g};if(e==="error"||e==="warn"){const c=u?d(t):l(t);if(e==="error"){console.error(c,n?JSON.stringify(n,null,2):"");try{const a=n?.component||"unknown",p=n?.action||"error",m=`error.${a}.${p}`,o={error_message:r,error_type:n?.errorType||"unknown",...n};typeof window<"u"&&(o.user_agent=navigator.userAgent,o.screen_size=`${window.screen.width}x${window.screen.height}`,o.viewport_size=`${window.innerWidth}x${window.innerHeight}`,o.url=window.location.href.substring(0,200)),v(m,o)}catch{}}else console.warn(c,n?JSON.stringify(n,null,2):"");return}if(!S())return;const f=u?d(t):l(t);e==="info"?console.info(f,n?JSON.stringify(n,null,2):""):console.debug(f,n?JSON.stringify(n,null,2):"")}const $={setService(e){g=e},enableDebug(){s=!0},disableDebug(){s=!1},debug(e,r){i("debug",e,r)},info(e,r){i("info",e,r)},warn(e,r){i("warn",e,r)},error(e,r){i("error",e,r)}};export{$ as l};
