const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./mermaid.core-Uq_ZVHs5.js","./preload-helper-PPVm8Dsz.js","./index-DrFu-skq.js","./iframe-CLHqt8sP.js","./iframe-DpEoXwgX.css","./transform-8mVIBRNT.js"])))=>i.map(i=>d[i]);
import{_ as g}from"./preload-helper-PPVm8Dsz.js";import{a as i,j as s}from"./iframe-CLHqt8sP.js";import{l as y}from"./logger-CfJbYVt4.js";let u=!1;async function _(){if(!u)try{const e=await g(()=>import("./mermaid.core-Uq_ZVHs5.js").then(o=>o.aR),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),r=e.default||e;typeof r.initialize=="function"&&(r.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",flowchart:{useMaxWidth:!0,htmlLabels:!0}}),u=!0)}catch(e){console.error("Failed to initialize Mermaid:",e)}}function w({code:e,onExpand:r}){const o=i.useRef(null),[d,m]=i.useState(""),l=i.useMemo(()=>`mermaid-${Math.random().toString(36).slice(2)}`,[]);i.useEffect(()=>{let a=!0;async function f(){const c=e||"graph TD; A-->B;";try{await _();const t=await g(()=>import("./mermaid.core-Uq_ZVHs5.js").then(x=>x.aR),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),n=t.default||t;await n.parse(c);const h=await n.render(l,c);if(!a)return;const v=h?.svg||"";m(v)}catch(t){const n=t instanceof Error?t.message:String(t);y.error("Mermaid render error",{component:"mermaid",action:"render",errorType:t instanceof Error?t.constructor.name:"unknown",error:n}),m(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="60"><text x="10" y="35" fill="red">Mermaid render failed: ${n}</text></svg>`)}}return f(),()=>{a=!1}},[e,l]);const p=a=>{r&&(a.preventDefault(),a.stopPropagation(),r(d,e))};return s.jsxs("div",{className:"relative",children:[s.jsx("div",{ref:o,dangerouslySetInnerHTML:{__html:d}}),r&&s.jsx("button",{type:"button",onClick:p,className:"absolute top-2 right-2 inline-flex items-center rounded-md border border-slate-300 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm hover:bg-slate-50",children:"Expand"})]})}w.__docgenInfo={description:"",methods:[],displayName:"MermaidDiagram",props:{code:{required:!0,tsType:{name:"string"},description:""},onExpand:{required:!1,tsType:{name:"signature",type:"function",raw:"(svg: string, code: string) => void",signature:{arguments:[{type:{name:"string"},name:"svg"},{type:{name:"string"},name:"code"}],return:{name:"void"}}},description:""}}};export{w as M};
