import{a as p,R as O,j as $}from"./iframe-CLHqt8sP.js";import{c as se}from"./cn-VBtxfiI-.js";import{$ as $e,a as Ee}from"./useFocusRing-4vPDgUpM.js";import{r as W}from"./index-DRowAfMf.js";import{w as Pe,e as Te}from"./use-resolve-button-type-DhPqIc8n.js";import{u as ce,Y as R,y as Z,o as E,K as D,n as Q,a as ke,p as we,V as me,A as oe}from"./use-sync-refs-v6ctzwoA.js";import{A as Ce,y as Oe,R as Re,T as De,w as Fe,b as _e,F as Ae}from"./floating-2JlZ9ldt.js";import{p as Ne,c as q,a as v,f as K,b as Be,u as je,L as Ge,S as U,s as Le}from"./element-movement-D0iZG3pA.js";import{y as Ke}from"./use-inert-others-D6T4iGKN.js";import{T as Ue,k as ae,x as pe,a as He,c as Ve,S as w,b as Qe,u as le,p as qe,f as ze,t as Ye}from"./portal-CRTDVjVw.js";import{n as J,d as Ze,a as Je,o as h}from"./keyboard-DOqIamXD.js";import{s as We}from"./use-text-value-CbMKnS8g.js";import{c as Xe,i as z,u as et,N as tt,x as nt}from"./open-closed-B--VY9yg.js";import{F as rt}from"./use-tree-walker-D3zlMO2p.js";import{G as st,K as fe,R as ot,T as ie,H as at,I as lt}from"./focus-management-DE1YMz3g.js";import{H as it}from"./description-ezvdKXnU.js";import{C as ut,V as ve}from"./label-TZAP9ERS.js";import{K as dt}from"./transition-Bjg5DtQF.js";import{B as ct}from"./Button-DrzFMabF.js";import"./preload-helper-PPVm8Dsz.js";import"./bundle-mjs-COJ8Fh6m.js";import"./index-dLArjxyT.js";import"./bugs-ByA1MTr8.js";import"./variants-DKu3G6j2.js";var mt=Object.defineProperty,pt=(e,r,t)=>r in e?mt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ue=(e,r,t)=>(pt(e,typeof r!="symbol"?r+"":r,t),t),y=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(y||{}),Y=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Y||{}),u=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(u||{});function de(e,r=t=>t){let t=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=st(r(e.items.slice()),a=>a.dataRef.current.domRef.current),s=t?n.indexOf(t):null;return s===-1&&(s=null),{items:n,activeItemIndex:s}}let ft={1(e){if(e.menuState===1)return e;let r=e.buttonElement?q.Tracked(Be(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:v.Nothing},menuState:1,buttonPositionState:r}},0(e,r){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:r.focus,menuState:0,buttonPositionState:q.Idle}},2:(e,r)=>{var t,n,s,a,l;if(e.menuState===1)return e;let f={...e,searchQuery:"",activationTrigger:(t=r.trigger)!=null?t:1,__demoMode:!1};if(r.focus===v.Nothing)return{...f,activeItemIndex:null};if(r.focus===v.Specific)return{...f,activeItemIndex:e.items.findIndex(o=>o.id===r.id)};if(r.focus===v.Previous){let o=e.activeItemIndex;if(o!==null){let T=e.items[o].dataRef.current.domRef,b=K(r,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled});if(b!==null){let c=e.items[b].dataRef.current.domRef;if(((n=T.current)==null?void 0:n.previousElementSibling)===c.current||((s=c.current)==null?void 0:s.previousElementSibling)===null)return{...f,activeItemIndex:b}}}}else if(r.focus===v.Next){let o=e.activeItemIndex;if(o!==null){let T=e.items[o].dataRef.current.domRef,b=K(r,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled});if(b!==null){let c=e.items[b].dataRef.current.domRef;if(((a=T.current)==null?void 0:a.nextElementSibling)===c.current||((l=c.current)==null?void 0:l.nextElementSibling)===null)return{...f,activeItemIndex:b}}}}let g=de(e),P=K(r,{resolveItems:()=>g.items,resolveActiveIndex:()=>g.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...f,...g,activeItemIndex:P}},3:(e,r)=>{let t=e.searchQuery!==""?0:1,n=e.searchQuery+r.value.toLowerCase(),s=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+t).concat(e.items.slice(0,e.activeItemIndex+t)):e.items).find(l=>{var f;return((f=l.dataRef.current.textValue)==null?void 0:f.startsWith(n))&&!l.dataRef.current.disabled}),a=s?e.items.indexOf(s):-1;return a===-1||a===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:a,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,r)=>{let t=e.items.concat(r.items.map(s=>s)),n=e.activeItemIndex;return e.pendingFocus.focus!==v.Nothing&&(n=K(e.pendingFocus,{resolveItems:()=>t,resolveActiveIndex:()=>e.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled})),{...e,items:t,activeItemIndex:n,pendingFocus:{focus:v.Nothing},pendingShouldSort:!0}},6:(e,r)=>{let t=e.items,n=[],s=new Set(r.items);for(let[a,l]of t.entries())if(s.has(l.id)&&(n.push(a),s.delete(l.id),s.size===0))break;if(n.length>0){t=t.slice();for(let a of n.reverse())t.splice(a,1)}return{...e,items:t,activationTrigger:1}},7:(e,r)=>e.buttonElement===r.element?e:{...e,buttonElement:r.element},8:(e,r)=>e.itemsElement===r.element?e:{...e,itemsElement:r.element},9:e=>e.pendingShouldSort?{...e,...de(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:q.Moved}}};class X extends Ue{constructor(r){super(r),ue(this,"actions",{registerItem:ae(()=>{let t=[],n=new Set;return[(s,a)=>{n.has(a)||(n.add(a),t.push({id:s,dataRef:a}))},()=>(n.clear(),this.send({type:5,items:t.splice(0)}))]}),unregisterItem:ae(()=>{let t=[];return[n=>t.push(n),()=>this.send({type:6,items:t.splice(0)})]})}),ue(this,"selectors",{activeDescendantId(t){var n;let s=t.activeItemIndex,a=t.items;return s===null||(n=a[s])==null?void 0:n.id},isActive(t,n){var s;let a=t.activeItemIndex,l=t.items;return a!==null?((s=l[a])==null?void 0:s.id)===n:!1},shouldScrollIntoView(t,n){return t.__demoMode||t.menuState!==0||t.activationTrigger===0?!1:this.isActive(t,n)},didButtonMove(t){return t.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let t=this.state.id,n=pe.get(null);this.disposables.add(n.on(He.Push,s=>{!n.selectors.isTop(s,t)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>n.actions.push(t)),this.on(1,()=>n.actions.pop(t))}this.disposables.group(t=>{this.on(1,n=>{n.buttonElement&&(t.dispose(),t.add(Ne(n.buttonElement,n.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:r,__demoMode:t=!1}){return new X({id:r,__demoMode:t,menuState:t?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:v.Nothing},buttonPositionState:q.Idle})}reduce(r,t){return ce(t.type,ft,r,t)}}const ge=p.createContext(null);function ee(e){let r=p.useContext(ge);if(r===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,be),t}return r}function be({id:e,__demoMode:r=!1}){let t=p.useMemo(()=>X.new({id:e,__demoMode:r}),[]);return Ve(()=>t.dispose()),t}let vt=p.Fragment;function gt(e,r){let t=p.useId(),{__demoMode:n=!1,...s}=e,a=be({id:t,__demoMode:n}),[l,f,g]=w(a,x=>[x.menuState,x.itemsElement,x.buttonElement]),P=Z(r),o=pe.get(null),T=w(o,p.useCallback(x=>o.selectors.isTop(x,t),[o,t]));Qe(T,[g,f],(x,S)=>{var M;a.send({type:u.CloseMenu}),at(S,lt.Loose)||(x.preventDefault(),(M=a.state.buttonElement)==null||M.focus())});let b=E(()=>{a.send({type:u.CloseMenu})}),c=J({open:l===y.Open,close:b}),I={ref:P},k=D();return O.createElement(Ce,null,O.createElement(ge.Provider,{value:a},O.createElement(Xe,{value:ce(l,{[y.Open]:z.Open,[y.Closed]:z.Closed})},k({ourProps:I,theirProps:s,slot:c,defaultTag:vt,name:"Menu"}))))}let bt="button";function It(e,r){let t=ee("Menu.Button"),n=p.useId(),{id:s=`headlessui-menu-button-${n}`,disabled:a=!1,autoFocus:l=!1,...f}=e,g=p.useRef(null),P=_e(),o=Z(r,g,Ae(),E(d=>t.send({type:u.SetButtonElement,element:d}))),T=E(d=>{switch(d.key){case h.Space:case h.Enter:case h.ArrowDown:d.preventDefault(),d.stopPropagation(),t.send({type:u.OpenMenu,focus:{focus:v.First}});break;case h.ArrowUp:d.preventDefault(),d.stopPropagation(),t.send({type:u.OpenMenu,focus:{focus:v.Last}});break}}),b=E(d=>{switch(d.key){case h.Space:d.preventDefault();break}}),[c,I,k]=w(t,d=>[d.menuState,d.buttonElement,d.itemsElement]),x=c===y.Open;Ge(x,{trigger:I,action:p.useCallback(d=>{if(I!=null&&I.contains(d.target))return U.Ignore;let m=d.target.closest('[role="menuitem"]:not([data-disabled])');return Je(m)?U.Select(m):k!=null&&k.contains(d.target)?U.Ignore:U.Close},[I,k]),close:p.useCallback(()=>t.send({type:u.CloseMenu}),[]),select:p.useCallback(d=>d.click(),[])});let S=Le(d=>{var m;a||(c===y.Open?(W.flushSync(()=>t.send({type:u.CloseMenu})),(m=g.current)==null||m.focus({preventScroll:!0})):(d.preventDefault(),t.send({type:u.OpenMenu,focus:{focus:v.Nothing},trigger:Y.Pointer})))}),{isFocusVisible:M,focusProps:F}=$e({autoFocus:l}),{isHovered:N,hoverProps:_}=Ee({isDisabled:a}),{pressed:C,pressProps:B}=Pe({disabled:a}),A=J({open:c===y.Open,active:C||c===y.Open,disabled:a,hover:N,focus:M,autofocus:l}),j=me(P(),{ref:o,id:s,type:Te(e,g.current),"aria-haspopup":"menu","aria-controls":k?.id,"aria-expanded":c===y.Open,disabled:a||void 0,autoFocus:l,onKeyDown:T,onKeyUp:b},S,F,_,B);return D()({ourProps:j,theirProps:f,slot:A,defaultTag:bt,name:"Menu.Button"})}let ht="div",yt=oe.RenderStrategy|oe.Static;function xt(e,r){let t=p.useId(),{id:n=`headlessui-menu-items-${t}`,anchor:s,portal:a=!1,modal:l=!0,transition:f=!1,...g}=e,P=Oe(s),o=ee("Menu.Items"),[T,b]=Re(P),c=De(),[I,k]=p.useState(null),x=Z(r,P?T:null,E(i=>o.send({type:u.SetItemsElement,element:i})),k),[S,M]=w(o,i=>[i.menuState,i.buttonElement]),F=le(M),N=le(I);P&&(a=!0);let _=et(),[C,B]=tt(f,I,_!==null?(_&z.Open)===z.Open:S===y.Open);qe(C,M,()=>{o.send({type:u.CloseMenu})});let A=w(o,i=>i.__demoMode),j=A?!1:l&&S===y.Open;ze(j,N);let d=A?!1:l&&S===y.Open;Ke(d,{allowed:p.useCallback(()=>[M,I],[M,I])});let m=w(o,o.selectors.didButtonMove)?!1:C;p.useEffect(()=>{let i=I;i&&S===y.Open&&(Ze(i)||i.focus({preventScroll:!0}))},[S,I]),rt(S===y.Open,{container:I,accept(i){return i.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:i.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(i){i.setAttribute("role","none")}});let G=we(),Ie=E(i=>{var L,ne,re;switch(G.dispose(),i.key){case h.Space:if(o.state.searchQuery!=="")return i.preventDefault(),i.stopPropagation(),o.send({type:u.Search,value:i.key});case h.Enter:if(i.preventDefault(),i.stopPropagation(),o.state.activeItemIndex!==null){let{dataRef:Me}=o.state.items[o.state.activeItemIndex];(ne=(L=Me.current)==null?void 0:L.domRef.current)==null||ne.click()}o.send({type:u.CloseMenu}),fe(o.state.buttonElement);break;case h.ArrowDown:return i.preventDefault(),i.stopPropagation(),o.send({type:u.GoToItem,focus:v.Next});case h.ArrowUp:return i.preventDefault(),i.stopPropagation(),o.send({type:u.GoToItem,focus:v.Previous});case h.Home:case h.PageUp:return i.preventDefault(),i.stopPropagation(),o.send({type:u.GoToItem,focus:v.First});case h.End:case h.PageDown:return i.preventDefault(),i.stopPropagation(),o.send({type:u.GoToItem,focus:v.Last});case h.Escape:i.preventDefault(),i.stopPropagation(),W.flushSync(()=>o.send({type:u.CloseMenu})),(re=o.state.buttonElement)==null||re.focus({preventScroll:!0});break;case h.Tab:i.preventDefault(),i.stopPropagation(),W.flushSync(()=>o.send({type:u.CloseMenu})),ot(o.state.buttonElement,i.shiftKey?ie.Previous:ie.Next);break;default:i.key.length===1&&(o.send({type:u.Search,value:i.key}),G.setTimeout(()=>o.send({type:u.ClearSearch}),350));break}}),he=E(i=>{switch(i.key){case h.Space:i.preventDefault();break}}),ye=J({open:S===y.Open}),xe=me(P?c():{},{"aria-activedescendant":w(o,o.selectors.activeDescendantId),"aria-labelledby":w(o,i=>{var L;return(L=i.buttonElement)==null?void 0:L.id}),id:n,onKeyDown:Ie,onKeyUp:he,role:"menu",tabIndex:S===y.Open?0:void 0,ref:x,style:{...g.style,...b,"--button-width":Fe(C,M,!0).width},...nt(B)}),Se=D();return O.createElement(Ye,{enabled:a?e.static||C:!1,ownerDocument:F},Se({ourProps:xe,theirProps:g,slot:ye,defaultTag:ht,features:yt,visible:m,name:"Menu.Items"}))}let St=p.Fragment;function Mt(e,r){let t=p.useId(),{id:n=`headlessui-menu-item-${t}`,disabled:s=!1,...a}=e,l=ee("Menu.Item"),f=w(l,m=>l.selectors.isActive(m,n)),g=p.useRef(null),P=Z(r,g),o=w(l,m=>l.selectors.shouldScrollIntoView(m,n));Q(()=>{if(o)return ke().requestAnimationFrame(()=>{var m,G;(G=(m=g.current)==null?void 0:m.scrollIntoView)==null||G.call(m,{block:"nearest"})})},[o,g]);let T=We(g),b=p.useRef({disabled:s,domRef:g,get textValue(){return T()}});Q(()=>{b.current.disabled=s},[b,s]),Q(()=>(l.actions.registerItem(n,b),()=>l.actions.unregisterItem(n)),[b,n]);let c=E(()=>{l.send({type:u.CloseMenu})}),I=E(m=>{if(s)return m.preventDefault();l.send({type:u.CloseMenu}),fe(l.state.buttonElement)}),k=E(()=>{if(s)return l.send({type:u.GoToItem,focus:v.Nothing});l.send({type:u.GoToItem,focus:v.Specific,id:n})}),x=je(),S=E(m=>x.update(m)),M=E(m=>{x.wasMoved(m)&&(s||f||l.send({type:u.GoToItem,focus:v.Specific,id:n,trigger:Y.Pointer}))}),F=E(m=>{x.wasMoved(m)&&(s||f&&l.state.activationTrigger===Y.Pointer&&l.send({type:u.GoToItem,focus:v.Nothing}))}),[N,_]=ve(),[C,B]=it(),A=J({active:f,focus:f,disabled:s,close:c}),j={id:n,ref:P,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-labelledby":N,"aria-describedby":C,disabled:void 0,onClick:I,onFocus:k,onPointerEnter:S,onMouseEnter:S,onPointerMove:M,onMouseMove:M,onPointerLeave:F,onMouseLeave:F},d=D();return O.createElement(_,null,O.createElement(B,null,d({ourProps:j,theirProps:a,slot:A,defaultTag:St,name:"Menu.Item"})))}let $t="div";function Et(e,r){let[t,n]=ve(),s=e,a={ref:r,"aria-labelledby":t,role:"group"},l=D();return O.createElement(n,null,l({ourProps:a,theirProps:s,slot:{},defaultTag:$t,name:"Menu.Section"}))}let Pt="header";function Tt(e,r){let t=p.useId(),{id:n=`headlessui-menu-heading-${t}`,...s}=e,a=ut();Q(()=>a.register(n),[n,a.register]);let l={id:n,ref:r,role:"presentation",...a.props};return D()({ourProps:l,theirProps:s,slot:{},defaultTag:Pt,name:"Menu.Heading"})}let kt="div";function wt(e,r){let t=e,n={ref:r,role:"separator"};return D()({ourProps:n,theirProps:t,slot:{},defaultTag:kt,name:"Menu.Separator"})}let Ct=R(gt),Ot=R(It),Rt=R(xt),Dt=R(Mt),Ft=R(Et),_t=R(Tt),At=R(wt),H=Object.assign(Ct,{Button:Ot,Items:Rt,Item:Dt,Section:Ft,Heading:_t,Separator:At});const Nt={bottom:"top-full mt-2",top:"bottom-full mb-2",right:"left-full ml-2",left:"right-full mr-2"};function te({trigger:e,items:r,placement:t="bottom"}){return $.jsxs(H,{as:"div",className:"relative inline-block text-left",children:[$.jsx(H.Button,{as:p.Fragment,children:e}),$.jsx(dt,{as:p.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:$.jsx(H.Items,{className:se("absolute z-50",Nt[t],"min-w-[200px]","bg-[var(--color-background)] border border-[var(--color-border)] rounded-md shadow-lg","py-1"),children:r.map((n,s)=>$.jsxs(p.Fragment,{children:[n.divider&&s>0&&$.jsx("div",{className:"h-px bg-[var(--color-border)] my-1"}),$.jsx(H.Item,{disabled:n.disabled,children:({active:a,disabled:l})=>$.jsxs("button",{onClick:n.onClick,disabled:l||n.disabled,className:se("w-full flex items-center gap-3 px-4 py-2 text-sm","border-none text-left transition-all",l||n.disabled?"text-[var(--color-text-tertiary)] opacity-50 cursor-not-allowed":n.danger?"text-[var(--color-error-500)]":"text-[var(--color-text-primary)]",a&&!l&&"bg-[var(--color-surface)]"),children:[n.icon&&$.jsx("span",{className:"flex items-center",children:n.icon}),$.jsx("span",{children:n.label})]})})]},s))})})]})}te.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{trigger:{required:!0,tsType:{name:"ReactNode"},description:"Button/content that triggers the menu"},items:{required:!0,tsType:{name:"Array",elements:[{name:"MenuItem"}],raw:"MenuItem[]"},description:"Menu items"},placement:{required:!1,tsType:{name:"union",raw:"'left' | 'right' | 'top' | 'bottom'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"Menu placement",defaultValue:{value:"'bottom'",computed:!1}}}};const un={title:"UI/Menu",component:te,tags:["autodocs"],argTypes:{trigger:{control:!1},items:{control:!1},placement:{control:{type:"select"},options:["top","bottom","left","right"]}}},V={args:{trigger:$.jsx(ct,{children:"Open Menu"}),items:[{label:"Item One",onClick:()=>{}},{label:"Item Two",onClick:()=>{},divider:!0},{label:"Delete",onClick:()=>{},danger:!0}]},render:e=>$.jsx("div",{style:{padding:32},children:$.jsx(te,{...e})})};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:`{
  args: {
    trigger: <Button>Open Menu</Button>,
    items: [{
      label: 'Item One',
      onClick: () => {}
    }, {
      label: 'Item Two',
      onClick: () => {},
      divider: true
    }, {
      label: 'Delete',
      onClick: () => {},
      danger: true
    }]
  },
  render: (args: any) => <div style={{
    padding: 32
  }}>
      <Menu {...args} />
    </div>
}`,...V.parameters?.docs?.source}}};const dn=["Basic"];export{V as Basic,dn as __namedExportsOrder,un as default};
